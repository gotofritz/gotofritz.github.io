<!DOCTYPE html>


<html lang="en-GB">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Icons / Favicon -->
<link rel="icon" href="/favicon.ico" sizes="any">
<link rel="icon" href="/icon.svg" type="image/svg+xml">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<link rel="manifest" href="/manifest.webmanifest">
<link rel="canonical" href="https://gotofritz.net/blog/history-of-dance-music-as-jupyter-notebook/">

<!-- Primary Meta Tags -->
<title>History of Disco and Dance Music: a Jupyter notebook • gotofritz.net</title>
<meta name="title" content="History of Disco and Dance Music: a Jupyter notebook • gotofritz.net">
<meta name="description" content="I wanted to see how well OpenAI's ChatGPT would work for teaching, so I asked it to design a Jupyter course. The first assignment it gave me was to explore the history of disco and dance music. I need to use both text and images to describe the key developments and important figures in the genre.">
<meta name="author" content="Fritz Stelluto">

<!-- Theme Colour -->
<meta name="theme-color" content="#fafafa">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="article">
<meta property="og:title" content="History of Disco and Dance Music: a Jupyter notebook">
<meta property="og:description" content="I wanted to see how well OpenAI's ChatGPT would work for teaching, so I asked it to design a Jupyter course. The first assignment it gave me was to explore the history of disco and dance music. I need to use both text and images to describe the key developments and important figures in the genre.">
<meta property="og:url" content="https://gotofritz.net/blog/history-of-dance-music-as-jupyter-notebook/">
<meta property="og:site_name" content="gotofritz.net">
<meta property="og:locale" content="en_GB">
<meta property="og:image" content="https://gotofritz.net/og-image/history-of-dance-music-as-jupyter-notebook.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="article:author" content="Fritz Stelluto"><meta property="article:published_time" content="2022-12-11T00:00:00.000Z">

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://gotofritz.net/blog/history-of-dance-music-as-jupyter-notebook/">
<meta property="twitter:title" content="History of Disco and Dance Music: a Jupyter notebook">
<meta property="twitter:description" content="I wanted to see how well OpenAI's ChatGPT would work for teaching, so I asked it to design a Jupyter course. The first assignment it gave me was to explore the history of disco and dance music. I need to use both text and images to describe the key developments and important figures in the genre.">
<meta property="twitter:image" content="https://gotofritz.net/og-image/history-of-dance-music-as-jupyter-notebook.png">

<!-- RSS auto-discovery -->
<link rel="alternate" type="application/rss+xml" title="gotofritz.net" href="/rss.xml">
    <script>(function(){const siteConfig = {"author":"Fritz Stelluto","title":"gotofritz.net","description":"I'm Fritz, an engineer based in Berlin. I currently work in the Data Science department at Wayfair. I tend to write short posts about technical stuff","lang":"en-GB","ogLocale":"en_GB","themeColorLight":"#fafafa","themeColorDark":"#1d1f21"};

      const root = document.documentElement;
      const colorThemeMetaTag = document.querySelector("meta[name='theme-color']");

      // get user preference of dark mode, 1st local storage, 2nd browser
      function getThemePreference() {
        if (typeof localStorage !== "undefined" && localStorage.getItem("theme")) {
          return localStorage.getItem("theme");
        }
        return window.matchMedia("(prefers-color-scheme: dark)").matches
          ? "dark"
          : "light";
      }

      const isDark = getThemePreference() === "dark";

      // watch document element class attribute and update user preference when it changes.
      const observer = new MutationObserver(() => {
        const rootIsDark = root.classList.contains("dark");
        // set the meta attribute
        colorThemeMetaTag.setAttribute(
          "content",
          siteConfig[rootIsDark ? "themeColorDark" : "themeColorLight"]
        );
        // store user preference
        if (typeof localStorage !== "undefined") {
          localStorage.setItem("theme", rootIsDark ? "dark" : "light");
        }
      });
      observer.observe(root, { attributeFilter: ["class"] });

      // initailse root class attribute
      root.classList.toggle("dark", isDark);
    })();</script>
  <link rel="stylesheet" href="/_astro/_...post_.afbe0fa4.css" /><script type="module" src="/_astro/hoisted.99e77f46.js"></script>
<script type="module" src="/_astro/page.b7cc8384.js"></script></head>
  <body>
    <a href="#main" class="sr-only focus:not-sr-only focus:fixed focus:top-1.5 focus:left-1">skip to content
</a>
    <header id="main-header" class="group mb-12 flex flex-wrap items-center justify-start gap-y-8 sm:mb-28 sm:gap-y-0">
  <a href="/" class="order-1 block grow-0 items-center grayscale hover:filter-none">
    <svg class="h-10 w-10 rounded-md bg-black dark:bg-white sm:mr-0 sm:h-[4.25rem] sm:w-[4.25rem]" aria-hidden="true" focusable="false" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
      <g>
        <path id="path-goto" d="M 123.8 88 L 52 88 L 52 194.7 L 87 194.7 L 87 159.6 L 70 159.6 L 70 123.6 L 124 123 L 124 230 L 17 230 C 17 230 17 17 17 52 C 17 52 124 52 124 52 L 124 88 L 123.8 88 Z M 176.25 194.684 C 176.25 194.684 210.52 194.684 210.52 194.684 C 210.52 194.684 211 89 211 89 C 211 89 176 89 176 89 C 176 89 176 195 176 195 L 176.25 194.684 Z M 246 230 L 140 230 C 140 230 140 52 140 52 C 140 52 247 52 247 52 C 247 52 246 230 246 230 Z M 334 230 L 297 230 L 298.27 88.527 L 263.02 88.527 C 263.02 88.527 263 52 263 52 C 263 52 369 52 369 52 C 369 52 369.75 88.527 369.75 88.527 L 334.5 88.527 L 334 230 Z M 422.25 194.684 C 422.25 194.684 456.52 194.684 456.52 194.684 C 456.52 194.684 456 88.79 456 88.79 C 456 88.79 422 88.79 422 88.79 C 422 88.79 422.25 194.684 422.25 194.684 Z M 492 230 L 386 230 C 386 230 386 52 386 52 C 386 52 492 52 492 52 L 492 230 Z" class="fill-white stroke-none dark:fill-black">
          <title>GOTO</title>
        </path>
      </g>
      <g>
        <path id="path-fritz" stroke-width="1" d="M 51 461 L 17 461 L 17 294 L 100 294 L 100 327.337 L 51 327.375 L 51 361.722 L 100 361.685 L 100 395.022 L 51 395.06 L 51 461 Z M 150 327.375 C 150 327.375 150 361.722 150 361.722 C 150 361.722 182 361.685 182 361.685 C 182 361.685 182 327.337 182 327.337 C 182 327.337 150 327.375 150 327.375 Z M 150 461 L 116 461 L 116 294 L 199.5 294.037 L 200 311.174 L 216 311.211 L 216 378.859 L 200 378.859 L 200 395.022 L 216 395.022 L 216 461 L 182 461 L 182 395.022 L 150 395.06 L 150 461 Z M 265 461.697 L 231.1 461 L 231 294 L 265 294.037 L 265 461 L 265 461.697 Z M 347 461.697 L 313 461 L 313 327.337 L 280 327.337 L 280 294 L 380 294.037 L 380 327.375 L 347 327.375 L 347 461 L 347 461.697 Z M 495 461.697 L 395 461 L 395 394.517 L 411.58 394.524 L 411.58 377.856 L 428.08 377.856 L 428.08 361.722 L 444.58 361.722 L 444.58 344.549 L 462 344.511 L 461.08 327.375 L 395 327.337 L 395 294 L 495 294.037 L 495 345.559 L 478.5 345.559 L 478.5 361.722 L 462 361.722 L 462 377.886 L 445 377.848 L 445 395.022 L 429 395.06 L 429 429.407 L 495 429.407 L 495 461 L 495 461.697 Z M 462 361.722 L 478 361.685 L 462 361.722 Z M 478.5 345.559 L 495 345.559 L 478 345.521 L 478.5 345.559 Z" class="fill-white stroke-none dark:fill-black">
          <title>FRITZ</title>
        </path>
      </g>
    </svg></a>
  
  

<theme-toggle class="ml-auto order-3 sm:order-3">
  <button type="button" id="toggle-theme" class="group relative h-10 w-10 rounded-md bg-zinc-200 p-2 ring-zinc-400 transition-all hover:ring-2 dark:bg-zinc-700" aria-label="Toggle Dark Mode">
    <svg id="sun-svg" class="absolute top-1/2 left-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all group-aria-pressed:scale-100 group-aria-pressed:opacity-100" aria-hidden="true" focusable="false" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
      <path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
      <path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
      <path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
      <path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
      <path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
      <path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
      <path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
      <path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
    </svg>
    <svg id="moon-svg" class="absolute top-1/2 left-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all group-aria-[pressed=false]:scale-100 group-aria-[pressed=false]:opacity-100" aria-hidden="true" focusable="false" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.5"></circle>
      <path d="M7.63262 3.06689C8.98567 3.35733 9.99999 4.56025 9.99999 6.00007C9.99999 7.65693 8.65685 9.00007 6.99999 9.00007C5.4512 9.00007 4.17653 7.82641 4.01685 6.31997" stroke="currentColor" stroke-width="1.5"></path>
      <path d="M22 13.0505C21.3647 12.4022 20.4793 12 19.5 12C17.567 12 16 13.567 16 15.5C16 17.2632 17.3039 18.7219 19 18.9646" stroke="currentColor" stroke-width="1.5"></path>
      <path d="M14.5 8.51L14.51 8.49889" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
      <path d="M10 17C11.1046 17 12 16.1046 12 15C12 13.8954 11.1046 13 10 13C8.89543 13 8 13.8954 8 15C8 16.1046 8.89543 17 10 17Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
    </svg>
  </button>
</theme-toggle>
  <nav id="navigation-menu" class="flex gap-y-4 grow sm:grow-no items-end sm:flex-row sm:flex sm:items-center sm:mt-1 sm:py-0 sm:ml-8 text-accent order-2 sm:order-2 justify-around sm:justify-start" aria-label="Main menu">
    <a href="/" class="px-2 py-4 sm:py-0 sm:hover:underline" rel="prefetch">
      Home
    </a>
    <a href="/about" class="px-2 py-4 sm:py-0 sm:hover:underline" rel="prefetch">
      About
    </a>
    <a href="/blog" class="px-2 py-4 sm:py-0 sm:hover:underline" rel="prefetch">
      Blog
    </a>
    <a href="/fritz-stelluto_resume.pdf" class="px-2 py-4 sm:py-0 sm:hover:underline hidden sm:block">Resume</a>
  </nav>
</header>
    <main id="main" class="flex-1">
      <div class="sm:grid sm:grid-cols-4 sm:items-start sm:gap-x-10">
    <article class="col-span-3 break-words">
      <div id="blog-hero"><h1 class="title mb-1 text-5xl">History of Disco and Dance Music: a Jupyter notebook</h1>
<time datetime="2022-12-11T00:00:00.000Z">11 Dec 2022 </time>
<div class="before:content-['|'] inline">
      <svg aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" class="inline-block h-6 w-6" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <path d="M7.859 6h-2.834a2.025 2.025 0 0 0 -2.025 2.025v2.834c0 .537 .213 1.052 .593 1.432l6.116 6.116a2.025 2.025 0 0 0 2.864 0l2.834 -2.834a2.025 2.025 0 0 0 0 -2.864l-6.117 -6.116a2.025 2.025 0 0 0 -1.431 -.593z"></path>
          <path d="M17.573 18.407l2.834 -2.834a2.025 2.025 0 0 0 0 -2.864l-7.117 -7.116"></path>
          <path d="M6 9h-.01"></path>
        </svg>
      <a class="inline-block pr-1" aria-label="View more blogs with the tag DataScience" href="/tags/DataScience">
          #DataScience
        </a><a class="inline-block pr-1" aria-label="View more blogs with the tag Jupyter" href="/tags/Jupyter">
          #Jupyter
        </a><a class="inline-block pr-1" aria-label="View more blogs with the tag ChatGPT" href="/tags/ChatGPT">
          #ChatGPT
        </a>
    </div>
<p class="mt-8 text-xl leading-7">I wanted to see how well OpenAI's ChatGPT would work for teaching, so I asked it to design a Jupyter course. The first assignment it gave me was to explore the history of disco and dance music. I need to use both text and images to describe the key developments and important figures in the genre.</p></div>
      <div class="prose prose-sm prose-cactus mt-12 prose-headings:font-semibold prose-headings:before:absolute prose-headings:before:-ml-4 prose-headings:before:text-accent prose-headings:before:content-['#'] prose-th:before:content-none">
        <p>I’m not sure Jupyter notebooks are the best choice here because there’s no data analysis, but I’m not an AI so…</p>
<h2 id="getting-started">Getting started</h2>
<p>To get started, I create a folder for my Jupyter experiments, add a .gitignore from <a href="https://www.toptal.com/">Toptal</a>, and create a simple README. I also set the license as MIT.</p>
<pre is:raw="" class="astro-code" style="background-color: #272822; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;"><code><span class="line"><span style="color: #F8F8F2">❯ mkdir jupyter</span></span>
<span class="line"><span style="color: #F8F8F2">❯ </span><span style="color: #66D9EF">cd</span><span style="color: #F8F8F2"> jupyter</span></span>
<span class="line"><span style="color: #F8F8F2">❯ curl -L https://www.toptal.com/developers/gitignore/api/python,visualstudiocode,jupyter </span><span style="color: #F92672">></span><span style="color: #F8F8F2"> .gitignore</span></span>
<span class="line"><span style="color: #F8F8F2">❯ code README.md</span></span>
<span class="line"><span style="color: #F8F8F2">[writes some text]</span></span>
<span class="line"><span style="color: #F8F8F2">❯ git init</span></span>
<span class="line"><span style="color: #F8F8F2">❯ git add -a </span><span style="color: #F92672">&#x26;&#x26;</span><span style="color: #F8F8F2"> git commit -m </span><span style="color: #E6DB74">"initial commit"</span></span></code></pre>
<p>Then I create a python virtual env, install jupyter and run it:</p>
<pre is:raw="" class="astro-code" style="background-color: #272822; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;"><code><span class="line"><span style="color: #F8F8F2">❯ python -m venv .venv</span></span>
<span class="line"><span style="color: #F8F8F2">❯ pip install jupyter</span></span>
<span class="line"><span style="color: #F8F8F2">...</span></span>
<span class="line"><span style="color: #F8F8F2">❯ jupyter notebook</span></span></code></pre>
<p>That opens a web page in my browser. I click “New,” and create a folder called “History of disco and dance music.” Inside the folder, I create a notebook called “History of disco and dance music.ipynb” and save it. My folder structure looks like this:</p>
<pre is:raw="" class="astro-code" style="background-color: #272822; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;"><code><span class="line"><span style="color: #66D9EF">.</span></span>
<span class="line"><span style="color: #F8F8F2">├── History of disco and dance music</span></span>
<span class="line"><span style="color: #F8F8F2">│   └── History of disco and dance music.ipynb</span></span>
<span class="line"><span style="color: #F8F8F2">└── README.md</span></span></code></pre>
<p>I’m ready to start coding.</p>
<h2 id="importing-text-from-wikipedia">Importing text from Wikipedia</h2>
<p>To add text from Wikipedia, I can install the Wikipedia package and put this code in a cell:</p>
<pre is:raw="" class="astro-code" style="background-color: #272822; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;"><code><span class="line"><span style="color: #F92672">import</span><span style="color: #F8F8F2"> wikipedia</span></span>
<span class="line"><span style="color: #F8F8F2">wikipedia.summary(</span><span style="color: #E6DB74">"Disco music"</span><span style="color: #F8F8F2">, </span><span style="color: #FD971F">sentences</span><span style="color: #F92672">=</span><span style="color: #AE81FF">2</span><span style="color: #F8F8F2">)</span></span></code></pre>
<pre is:raw="" class="astro-code" style="background-color: #272822; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;"><code><span class="line"><span style="color: #E6DB74">"Disco is a genre of dance music and a subculture that emerged in the 1970s from the United States' urban nightlife scene. Its sound is typified by four-on-the-floor beats, syncopated basslines, string sections, horns, electric piano, synthesizers, and electric rhythm guitars."</span></span></code></pre>
<p>But I’d rather copy and paste it as Markdown so I can format it.</p>
<h2 id="extracting-time-information-from-text">Extracting time information from text</h2>
<p>A better way to use the Wikipedia Python API is to generate timeline events. I struggled getting someting useful from ChatGPT (regular expressions?? 🙄) but eventually we found a decent solution using SpaCy. But first, I have to download the language set with a bash command, something that ChatGPT had no idea about</p>
<pre is:raw="" class="astro-code" style="background-color: #272822; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;"><code><span class="line"><span style="color: #F92672">!</span><span style="color: #F8F8F2">python -m spacy download en_core_web_sm </span><span style="color: #F92672">></span><span style="color: #F8F8F2"> /dev/null</span></span></code></pre>
<p>The <code>> /dev/null</code> is a way to ignore all the noise - it’s a very noisy command. Now I can start using it.</p>
<pre is:raw="" class="astro-code" style="background-color: #272822; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;"><code><span class="line"><span style="color: #F92672">import</span><span style="color: #F8F8F2"> wikipedia</span></span>
<span class="line"><span style="color: #F92672">import</span><span style="color: #F8F8F2"> spacy</span></span>
<span class="line"><span style="color: #F8F8F2">nlp </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> spacy.load(</span><span style="color: #E6DB74">'en_core_web_sm'</span><span style="color: #F8F8F2">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">text </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> wikipedia.page(</span><span style="color: #E6DB74">"Disco music"</span><span style="color: #F8F8F2">).content</span></span>
<span class="line"></span>
<span class="line"><span style="color: #88846F"># Parse the text using spaCy</span></span>
<span class="line"><span style="color: #F8F8F2">doc </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> nlp(text)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #88846F"># extraxt the actual year from the token</span></span>
<span class="line"><span style="color: #F8F8F2">re_year </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> re.compile(</span><span style="color: #66D9EF">r</span><span style="color: #E6DB74">"(</span><span style="color: #AE81FF">[12][90]</span><span style="color: #E6DB74">\d\d)"</span><span style="color: #F8F8F2">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #88846F"># Iterate over the entities in the document</span></span>
<span class="line"><span style="color: #F92672">for</span><span style="color: #F8F8F2"> entity </span><span style="color: #F92672">in</span><span style="color: #F8F8F2"> doc.ents:</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #88846F"># Check if the entity is a date</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #F92672">if</span><span style="color: #F8F8F2"> entity.label_ </span><span style="color: #F92672">==</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">'DATE'</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #88846F"># Print the date and the associated text</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">try</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">        year </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> re_year.search(entity.text).group(</span><span style="color: #AE81FF">1</span><span style="color: #F8F8F2">)</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">except</span><span style="color: #F8F8F2"> </span><span style="color: #66D9EF">BaseException</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">        year </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> entity.text</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #66D9EF">print</span><span style="color: #F8F8F2">(</span><span style="color: #66D9EF">f</span><span style="color: #E6DB74">"</span><span style="color: #AE81FF">{</span><span style="color: #F8F8F2">year</span><span style="color: #AE81FF">}</span><span style="color: #E6DB74">,1,1</span><span style="color: #AE81FF">\t{</span><span style="color: #F8F8F2">entity.text</span><span style="color: #AE81FF">}\t{</span><span style="color: #F8F8F2">entity.sent.text</span><span style="color: #AE81FF">}</span><span style="color: #E6DB74">"</span><span style="color: #F8F8F2">)</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #66D9EF">print</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">'-----------------------------------'</span><span style="color: #F8F8F2">)</span></span></code></pre>
<pre is:raw="" class="astro-code" style="background-color: #272822; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;"><code><span class="line"><span style="color: #F8F8F2">1970,1,1 the 1970s Disco is a genre of dance music and a subculture that emerged </span><span style="color: #F92672">in</span><span style="color: #F8F8F2"> the 1970s from the United States</span><span style="color: #E6DB74">' urban nightlife scene.-----------------------------------</span></span>
<span class="line"><span style="color: #E6DB74">1960,1,1 the late 1960s Disco started as a mixture of music from venues popular with Italian Americans, Hispanic and Latino Americans and Black Americans in Philadelphia and New York City during the late 1960s and early 1970s.</span></span>
<span class="line"><span style="color: #E6DB74">-----------------------------------</span></span>
<span class="line"><span style="color: #E6DB74">1970,1,1 early 1970s Disco started as a mixture of music from venues popular with Italian Americans, Hispanic and Latino Americans and Black Americans in Philadelphia and New York City during the late 1960s and early 1970s.</span></span>
<span class="line"><span style="color: #E6DB74">-----------------------------------</span></span>
<span class="line"><span style="color: #E6DB74">...</span></span>
<span class="line"><span style="color: #E6DB74">-----------------------------------</span></span>
<span class="line"><span style="color: #E6DB74">1964,1,1 July 12, 1964 The earliest known use for the abbreviated form "disco" described this dress and has been found in The Salt Lake Tribune on July 12, 1964, Playboy magazine used it in September of the same year to describe Los Angeles nightclubs.</span></span>
<span class="line"><span style="color: #E6DB74">-----------------------------------</span></span>
<span class="line"><span style="color: #E6DB74">...</span></span></code></pre>
<p>This will need some manual cleaning up, but at least it makes sense in a Jupyter notebook. I go through all the lines in the texts, and selectively copy those that seem useful, cleaning up the text. I save it to a tsv file, timeline.csv, ready to be imported into the notebook. <a href="https://github.com/gotofritz/jupyter/blob/trunk/History%20of%20disco%20and%20dance%20music/timeline.tsv">It is available on github</a>, but it’s rather short, as the futility of this task became quickly apparent.</p>
<h2 id="displaying-a-timeline-of-events-in-python-with-matplotlib">Displaying a timeline of events in Python with matplotlib</h2>
<p>Creating a timeline of events in Python with matplotlib is a terrible idea. The best I could come up with was this, but getting there was painful.</p>
<p><img src="/assets/history-of-dance-music-as-jupyter-notebook/timeline-of-disco.png" alt="A very basic timeline interface, not accessible and not slick"></p>
<p>To run matplotlib in the notebook, I enabled it with %matplotlib inline:</p>
<pre is:raw="" class="astro-code" style="background-color: #272822; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;"><code><span class="line"><span style="color: #F92672">import</span><span style="color: #F8F8F2"> matplotlib.pyplot </span><span style="color: #F92672">as</span><span style="color: #F8F8F2"> plt</span></span>
<span class="line"><span style="color: #F92672">from</span><span style="color: #F8F8F2"> datetime </span><span style="color: #F92672">import</span><span style="color: #F8F8F2"> date</span></span>
<span class="line"><span style="color: #F92672">import</span><span style="color: #F8F8F2"> numpy </span><span style="color: #F92672">as</span><span style="color: #F8F8F2"> np</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F92672">%</span><span style="color: #F8F8F2">matplotlib inline</span></span></code></pre>
<p>I load the tsv file with pandas:</p>
<pre is:raw="" class="astro-code" style="background-color: #272822; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;"><code><span class="line"><span style="color: #F92672">import</span><span style="color: #F8F8F2"> pandas </span><span style="color: #F92672">as</span><span style="color: #F8F8F2"> pd</span></span>
<span class="line"><span style="color: #F92672">import</span><span style="color: #F8F8F2"> numpy </span><span style="color: #F92672">as</span><span style="color: #F8F8F2"> np</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">df </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> pd.read_csv(</span><span style="color: #E6DB74">'./timeline.tsv'</span><span style="color: #F8F8F2">,</span><span style="color: #FD971F">sep</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">'</span><span style="color: #AE81FF">\t</span><span style="color: #E6DB74">'</span><span style="color: #F8F8F2">)</span></span>
<span class="line"><span style="color: #AE81FF">...</span></span></code></pre>
<p>When experimenting with the graph, I found that the events were not evenly spaced out. If I made the space too large, the start of the timeline looked empty, and if it was too small, all of the events overlapped. I solved this problem by generating separate timelines for different periods with different settings for each:</p>
<pre is:raw="" class="astro-code" style="background-color: #272822; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;"><code><span class="line"><span style="color: #F8F8F2">sub_timelines </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> [{</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #E6DB74">"smaller_than"</span><span style="color: #F8F8F2">: </span><span style="color: #E6DB74">"1971,06,01"</span><span style="color: #F8F8F2">,</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #E6DB74">"larger_than"</span><span style="color: #F8F8F2">: </span><span style="color: #E6DB74">"1900,06,01"</span><span style="color: #F8F8F2">,</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #E6DB74">"figsize"</span><span style="color: #F8F8F2">: </span><span style="color: #AE81FF">16</span><span style="color: #F8F8F2">,</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #E6DB74">"title"</span><span style="color: #F8F8F2">: </span><span style="color: #E6DB74">"Before 1972</span><span style="color: #AE81FF">\n\n</span><span style="color: #E6DB74">"</span></span>
<span class="line"><span style="color: #F8F8F2">    },{</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #E6DB74">"smaller_than"</span><span style="color: #F8F8F2">: </span><span style="color: #E6DB74">"2100,06,01"</span><span style="color: #F8F8F2">,</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #E6DB74">"larger_than"</span><span style="color: #F8F8F2">: </span><span style="color: #E6DB74">"1971,06,01"</span><span style="color: #F8F8F2">,</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #E6DB74">"figsize"</span><span style="color: #F8F8F2">: </span><span style="color: #AE81FF">40</span><span style="color: #F8F8F2">,</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #E6DB74">"title"</span><span style="color: #F8F8F2">: </span><span style="color: #E6DB74">"From 1972 onwards"</span></span>
<span class="line"><span style="color: #F8F8F2">    }</span></span>
<span class="line"><span style="color: #F8F8F2">]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F92672">for</span><span style="color: #F8F8F2"> sub_timeline </span><span style="color: #F92672">in</span><span style="color: #F8F8F2"> sub_timelines:</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #AE81FF">...</span></span></code></pre>
<p>At the start of each iteration, I need to create a pandas dataframe by extracting only the rows I’m interested in. This is what the “smaller_than” and “larger_than” in the settings are for. It was tricky to do, and I couldn’t get any help from ChatGPT. If you have a dataframe df, you can filter it by using a condition like <code>df[ df[date] &#x3C; '2020,02,03' ]</code>. But if you have multiple conditions with an ‘and’ or an ‘or’, like <code>df[ df[date] &#x3C; '2020,02,03' and df[date] > '1800,02,03' ]</code>, it breaks with the error message “The truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all()“. This means that pandas doesn’t like ‘and’ and ‘or’ because it expects booleans on either side. Pandas is written in C under the hood, after all. Using bitwise ’&#x26;’ should work, but it doesn’t in this case because pandas doesn’t treat the result of <code>df[date] > '1800,02,03'</code> as a boolean, but as a string. I don’t understand it either. The solution is to wrap the conditions with numpy.logical_and:</p>
<pre is:raw="" class="astro-code" style="background-color: #272822; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;"><code><span class="line"><span style="color: #F92672">for</span><span style="color: #F8F8F2"> sub_timeline </span><span style="color: #F92672">in</span><span style="color: #F8F8F2"> sub_timelines:</span></span>
<span class="line"><span style="color: #F8F8F2">    subset_df </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> df[np.logical_and(</span></span>
<span class="line"><span style="color: #F8F8F2">        sub_timeline[</span><span style="color: #E6DB74">"larger_than"</span><span style="color: #F8F8F2">] </span><span style="color: #F92672">&#x3C;</span><span style="color: #F8F8F2"> df[</span><span style="color: #E6DB74">'date'</span><span style="color: #F8F8F2">], df[</span><span style="color: #E6DB74">'date'</span><span style="color: #F8F8F2">] </span><span style="color: #F92672">&#x3C;=</span><span style="color: #F8F8F2"> sub_timeline[</span><span style="color: #E6DB74">"smaller_than"</span><span style="color: #F8F8F2">]</span></span>
<span class="line"><span style="color: #F8F8F2">        )]</span></span>
<span class="line"><span style="color: #F8F8F2">    dates</span><span style="color: #F92672">=</span><span style="color: #F8F8F2">[date(</span><span style="color: #F92672">*</span><span style="color: #F8F8F2">[</span><span style="color: #66D9EF">int</span><span style="color: #F8F8F2">(c) </span><span style="color: #F92672">for</span><span style="color: #F8F8F2"> c </span><span style="color: #F92672">in</span><span style="color: #F8F8F2"> cell.split(</span><span style="color: #E6DB74">","</span><span style="color: #F8F8F2">)]) </span><span style="color: #F92672">for</span><span style="color: #F8F8F2"> cell </span><span style="color: #F92672">in</span><span style="color: #F8F8F2"> subset_df[</span><span style="color: #E6DB74">'date'</span><span style="color: #F8F8F2">].to_list()]</span></span>
<span class="line"><span style="color: #F8F8F2">    min_date </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> date(np.min(dates).year </span><span style="color: #F92672">-</span><span style="color: #F8F8F2"> </span><span style="color: #AE81FF">2</span><span style="color: #F8F8F2">, np.min(dates).month, np.min(dates).day)</span></span>
<span class="line"><span style="color: #F8F8F2">    max_date </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> date(np.max(dates).year </span><span style="color: #F92672">+</span><span style="color: #F8F8F2"> </span><span style="color: #AE81FF">2</span><span style="color: #F8F8F2">, np.max(dates).month, np.max(dates).day)</span></span>
<span class="line"></span></code></pre>
<p>I convert the dates column to a list with <code>df['date'].to_list()</code>, and then convert it all to date objects. min_date and max_date are needed for working out the ranges of the graph.</p>
<h3 id="wrapping-text-in-text-labels-in-matplotlib">Wrapping text in text labels in matplotlib</h3>
<p>…is not possible. Instead, it shrinks the text to fit it in the label. This is frustrating and limits the usefulness of the library. I had to create my own text wrapping function:</p>
<pre is:raw="" class="astro-code" style="background-color: #272822; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;"><code><span class="line"><span style="color: #88846F"># manually wrap the text into lines of max_line_length</span></span>
<span class="line"><span style="color: #F8F8F2">    labels </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> []</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">for</span><span style="color: #F8F8F2"> label </span><span style="color: #F92672">in</span><span style="color: #F8F8F2"> subset_df[</span><span style="color: #E6DB74">'text'</span><span style="color: #F8F8F2">].to_list():</span></span>
<span class="line"><span style="color: #F8F8F2">        lines </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> []</span><span style="color: #F44747">;</span></span>
<span class="line"><span style="color: #F8F8F2">        words </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> label.split(</span><span style="color: #E6DB74">" "</span><span style="color: #F8F8F2">)</span></span>
<span class="line"><span style="color: #F8F8F2">        line </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> words.pop(</span><span style="color: #AE81FF">0</span><span style="color: #F8F8F2">)</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #F92672">while</span><span style="color: #F8F8F2"> words:</span></span>
<span class="line"><span style="color: #F8F8F2">            next_word </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> words.pop(</span><span style="color: #AE81FF">0</span><span style="color: #F8F8F2">)</span></span>
<span class="line"><span style="color: #F8F8F2">            potential_next_line </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #66D9EF">f</span><span style="color: #E6DB74">"</span><span style="color: #AE81FF">{</span><span style="color: #F8F8F2">line</span><span style="color: #AE81FF">}</span><span style="color: #E6DB74"> </span><span style="color: #AE81FF">{</span><span style="color: #F8F8F2">next_word</span><span style="color: #AE81FF">}</span><span style="color: #E6DB74">"</span></span>
<span class="line"><span style="color: #F8F8F2">            </span><span style="color: #F92672">if</span><span style="color: #F8F8F2"> </span><span style="color: #66D9EF">len</span><span style="color: #F8F8F2">(potential_next_line) </span><span style="color: #F92672">&#x3C;=</span><span style="color: #F8F8F2"> max_line_length:</span></span>
<span class="line"><span style="color: #F8F8F2">                line </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> potential_next_line</span></span>
<span class="line"><span style="color: #F8F8F2">            </span><span style="color: #F92672">else</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">                lines.append(line)</span></span>
<span class="line"><span style="color: #F8F8F2">                line </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> next_word</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #F92672">if</span><span style="color: #F8F8F2"> line:</span></span>
<span class="line"><span style="color: #F8F8F2">            lines.append(line)</span></span>
<span class="line"><span style="color: #F8F8F2">        labels.append(</span><span style="color: #E6DB74">"</span><span style="color: #AE81FF">\n</span><span style="color: #E6DB74">"</span><span style="color: #F8F8F2">.join(lines))</span></span>
<span class="line"><span style="color: #F8F8F2">    date_labels </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> subset_df[</span><span style="color: #E6DB74">'date_label'</span><span style="color: #F8F8F2">].to_list()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #88846F"># prepend label with display date</span></span>
<span class="line"><span style="color: #F8F8F2">    labels </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> [</span><span style="color: #66D9EF">f</span><span style="color: #E6DB74">"</span><span style="color: #AE81FF">{</span><span style="color: #F8F8F2">l</span><span style="color: #AE81FF">}</span><span style="color: #E6DB74">:</span><span style="color: #AE81FF">\n{</span><span style="color: #F8F8F2">t</span><span style="color: #AE81FF">}</span><span style="color: #E6DB74">"</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">for</span><span style="color: #F8F8F2"> l, t </span><span style="color: #F92672">in</span><span style="color: #F8F8F2"> </span><span style="color: #66D9EF">zip</span><span style="color: #F8F8F2"> (date_labels, labels)]</span></span></code></pre>
<p>The source data fields are date, date_label, text, where date is a tuple that is used to generate a date object, and date_label is a human-friendly version of the date. I prepend the date_label to the text box, but there is no easy way to make it bold without also making the rest of the text bold. Overall, text wrapping in matplotlib is a major limitation of the library.</p>
<h3 id="a-simple-scatter-graph-for-a-timeline">A simple scatter graph for a timeline</h3>
<p>The graph itself is quite uneventful. It’s a one dimensional scatter graph. Basically, a line (<code>ax.axvline</code>) with some dots along it (<code>ax.scatter</code>)</p>
<pre is:raw="" class="astro-code" style="background-color: #272822; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;"><code><span class="line"><span style="color: #F8F8F2">    fig, ax </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> plt.subplots(</span><span style="color: #FD971F">figsize</span><span style="color: #F92672">=</span><span style="color: #F8F8F2">(</span><span style="color: #AE81FF">8</span><span style="color: #F8F8F2">, sub_timeline[</span><span style="color: #E6DB74">"figsize"</span><span style="color: #F8F8F2">]))</span></span>
<span class="line"><span style="color: #F8F8F2">    _ </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> ax.set_ylim(max_date, min_date)</span></span>
<span class="line"><span style="color: #F8F8F2">    _ </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> ax.axvline(</span><span style="color: #AE81FF">0</span><span style="color: #F8F8F2">, </span><span style="color: #FD971F">ymin</span><span style="color: #F92672">=</span><span style="color: #AE81FF">0.05</span><span style="color: #F8F8F2">, </span><span style="color: #FD971F">ymax</span><span style="color: #F92672">=</span><span style="color: #AE81FF">0.95</span><span style="color: #F8F8F2">, </span><span style="color: #FD971F">c</span><span style="color: #F92672">=</span><span style="color: #E6DB74">'deeppink'</span><span style="color: #F8F8F2">, </span><span style="color: #FD971F">zorder</span><span style="color: #F92672">=</span><span style="color: #AE81FF">1</span><span style="color: #F8F8F2">)</span></span>
<span class="line"><span style="color: #F8F8F2">    _ </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> ax.scatter(np.zeros(</span><span style="color: #66D9EF">len</span><span style="color: #F8F8F2">(dates)), dates, </span><span style="color: #FD971F">s</span><span style="color: #F92672">=</span><span style="color: #AE81FF">120</span><span style="color: #F8F8F2">, </span><span style="color: #FD971F">c</span><span style="color: #F92672">=</span><span style="color: #E6DB74">'palevioletred'</span><span style="color: #F8F8F2">, </span><span style="color: #FD971F">zorder</span><span style="color: #F92672">=</span><span style="color: #AE81FF">2</span><span style="color: #F8F8F2">)</span></span>
<span class="line"><span style="color: #F8F8F2">    _ </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> ax.scatter(np.zeros(</span><span style="color: #66D9EF">len</span><span style="color: #F8F8F2">(dates)), dates, </span><span style="color: #FD971F">s</span><span style="color: #F92672">=</span><span style="color: #AE81FF">30</span><span style="color: #F8F8F2">, </span><span style="color: #FD971F">c</span><span style="color: #F92672">=</span><span style="color: #E6DB74">'darkmagenta'</span><span style="color: #F8F8F2">, </span><span style="color: #FD971F">zorder</span><span style="color: #F92672">=</span><span style="color: #AE81FF">3</span><span style="color: #F8F8F2">)</span></span></code></pre>
<h3 id="adding-labels-to-the-timeline-graph">Adding labels to the timeline graph</h3>
<p>The most important part of the graph, the text, is not really a graph, it’s just some labels that appear at the right place. They are all offset with respect to the line in the middle. It alternates between far from the line and near the line, on either side of it, making it a cycle of four. I use the <code>.text</code> component for it, but the <code>.annotation</code> works equally well.</p>
<pre is:raw="" class="astro-code" style="background-color: #272822; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;"><code><span class="line"><span style="color: #F8F8F2">    label_offsets </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> np.repeat(</span><span style="color: #AE81FF">4.0</span><span style="color: #F8F8F2">, </span><span style="color: #66D9EF">len</span><span style="color: #F8F8F2">(dates))</span></span>
<span class="line"><span style="color: #F8F8F2">    label_offsets[</span><span style="color: #AE81FF">2</span><span style="color: #F8F8F2">::</span><span style="color: #AE81FF">4</span><span style="color: #F8F8F2">] </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> max_line_length </span><span style="color: #F92672">+</span><span style="color: #F8F8F2"> </span><span style="color: #AE81FF">2.0</span></span>
<span class="line"><span style="color: #F8F8F2">    label_offsets[</span><span style="color: #AE81FF">3</span><span style="color: #F8F8F2">::</span><span style="color: #AE81FF">4</span><span style="color: #F8F8F2">] </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> max_line_length </span><span style="color: #F92672">+</span><span style="color: #F8F8F2"> </span><span style="color: #AE81FF">2.0</span></span>
<span class="line"><span style="color: #F8F8F2">    label_offsets[</span><span style="color: #AE81FF">1</span><span style="color: #F8F8F2">::</span><span style="color: #AE81FF">2</span><span style="color: #F8F8F2">] </span><span style="color: #F92672">*=</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">-</span><span style="color: #AE81FF">1.0</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">for</span><span style="color: #F8F8F2"> i, (l, d) </span><span style="color: #F92672">in</span><span style="color: #F8F8F2"> </span><span style="color: #66D9EF">enumerate</span><span style="color: #F8F8F2">(</span><span style="color: #66D9EF">zip</span><span style="color: #F8F8F2">(labels, dates)):</span></span>
<span class="line"><span style="color: #F8F8F2">        align </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">'right'</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #F92672">if</span><span style="color: #F8F8F2"> i </span><span style="color: #F92672">%</span><span style="color: #F8F8F2"> </span><span style="color: #AE81FF">2</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">==</span><span style="color: #F8F8F2"> </span><span style="color: #AE81FF">0</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">            align </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">'left'</span></span>
<span class="line"><span style="color: #F8F8F2">        _ </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> ax.text(label_offsets[i], d, l, </span><span style="color: #FD971F">ha</span><span style="color: #F92672">=</span><span style="color: #F8F8F2">align, </span><span style="color: #FD971F">fontfamily</span><span style="color: #F92672">=</span><span style="color: #E6DB74">'serif'</span><span style="color: #F8F8F2">,</span></span>
<span class="line"><span style="color: #F8F8F2">                    </span><span style="color: #FD971F">bbox</span><span style="color: #F92672">=</span><span style="color: #F8F8F2">boxdic, </span><span style="color: #FD971F">verticalalignment</span><span style="color: #F92672">=</span><span style="color: #E6DB74">'center'</span><span style="color: #F8F8F2">,</span><span style="color: #FD971F">fontsize</span><span style="color: #F92672">=</span><span style="color: #AE81FF">10</span><span style="color: #F8F8F2">)</span></span></code></pre>
<h3 id="joining-the-labels-to-the-graph-with-lines">Joining the labels to the graph with lines</h3>
<p>Matplotlib suggests using stems in its example, but they don’t seem to work for horizontal lines. I followed Brad’s advice and used <code>.hlines</code> instead</p>
<pre is:raw="" class="astro-code" style="background-color: #272822; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;"><code><span class="line"><span style="color: #F8F8F2">    </span><span style="color: #88846F"># the lines joining the boxes to the main plot</span></span>
<span class="line"><span style="color: #F8F8F2">    stems </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> np.repeat(</span><span style="color: #AE81FF">4.0</span><span style="color: #F8F8F2">, </span><span style="color: #66D9EF">len</span><span style="color: #F8F8F2">(dates))</span></span>
<span class="line"><span style="color: #F8F8F2">    stems[</span><span style="color: #AE81FF">2</span><span style="color: #F8F8F2">::</span><span style="color: #AE81FF">4</span><span style="color: #F8F8F2">] </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> max_line_length </span><span style="color: #F92672">+</span><span style="color: #F8F8F2"> </span><span style="color: #AE81FF">4.0</span></span>
<span class="line"><span style="color: #F8F8F2">    stems[</span><span style="color: #AE81FF">3</span><span style="color: #F8F8F2">::</span><span style="color: #AE81FF">4</span><span style="color: #F8F8F2">] </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> max_line_length </span><span style="color: #F92672">+</span><span style="color: #F8F8F2"> </span><span style="color: #AE81FF">4.0</span></span>
<span class="line"><span style="color: #F8F8F2">    stems[</span><span style="color: #AE81FF">1</span><span style="color: #F8F8F2">::</span><span style="color: #AE81FF">2</span><span style="color: #F8F8F2">] </span><span style="color: #F92672">*=</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">-</span><span style="color: #AE81FF">1.0</span></span>
<span class="line"><span style="color: #F8F8F2">    x </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> ax.hlines(dates, </span><span style="color: #FD971F">xmin</span><span style="color: #F92672">=</span><span style="color: #AE81FF">0</span><span style="color: #F8F8F2">, </span><span style="color: #FD971F">xmax</span><span style="color: #F92672">=</span><span style="color: #F8F8F2">stems, </span><span style="color: #FD971F">linestyles</span><span style="color: #F92672">=</span><span style="color: #E6DB74">"dotted"</span><span style="color: #F8F8F2">, </span><span style="color: #FD971F">color</span><span style="color: #F92672">=</span><span style="color: #E6DB74">'darkmagenta'</span><span style="color: #F8F8F2">)</span></span></code></pre>
<h3 id="adding-images-to-the-timeline">Adding images to the timeline</h3>
<p>I decided to stop here. I have suffered enough.</p>
<h2 id="conclusion">Conclusion</h2>
<p>Python is not well-suited for creating timelines of events. Of the main graph packages used with Jupyter, <a href="https://plotly.com/python-api-reference/index.html">plotly</a>, <a href="http://seaborn.pydata.org/index.html">seaborn</a> and <a href="https://docs.bokeh.org/en/latest/index.html">bokeh</a> do not have this functionality built in. <a href="https://matplotlib.org/stable/gallery/lines_bars_and_markers/timeline.html">Matplotlib can be used to create a timeline</a>. It is not so hard to flip to vertical - someone called <a href="https://dadoverflow.com/2021/08/17/making-timelines-with-python/">Brad had blogged something similar</a>, and that was a very useful starting point. Still, it is better to use Javascript or CSS flex for this task. This was supposed to be a <em>beginner</em> exercise, and integrating JS is way too complicated for that level. Overall, the suggestion to use Python for creating timelines of events is a terrible idea.</p>
<p><a href="https://github.com/gotofritz/jupyter/blob/trunk/History%20of%20disco%20and%20dance%20music/History%20of%20disco%20and%20dance%20music.ipynb">The notebook is available on Github</a></p>
      </div>
    </article>
    <aside class="col-span-1 hidden text-right sm:sticky sm:top-20 sm:block">
      <nav class="mb-4 flex w-full flex-nowrap justify-end gap-4 text-xs text-gray-600 dark:text-gray-300">
        
        <a class="before:content-['<<']" href="/blog/deleting-tweets-and-likes-from-twitter">
              older
            </a>
        <a class="after:content-['>>']" href="/blog/how-to-build-blog-with-sveltekit-markdown-tailwind">
              newer
            </a>
        
      </nav>
      <h2 class="font-semibold">Table of Contents</h2><ul class="mt-4 space-y-2 text-xs">
              <li class="line-clamp-2 hover:text-accent">
                  <a href="#getting-started" aria-label="Scroll to section: Getting started">
                    <span>&#35;</span> Getting started
                  </a>
                </li><li class="line-clamp-2 hover:text-accent">
                  <a href="#importing-text-from-wikipedia" aria-label="Scroll to section: Importing text from Wikipedia">
                    <span>&#35;</span> Importing text from Wikipedia
                  </a>
                </li><li class="line-clamp-2 hover:text-accent">
                  <a href="#extracting-time-information-from-text" aria-label="Scroll to section: Extracting time information from text">
                    <span>&#35;</span> Extracting time information from text
                  </a>
                </li><li class="line-clamp-2 hover:text-accent">
                  <a href="#displaying-a-timeline-of-events-in-python-with-matplotlib" aria-label="Scroll to section: Displaying a timeline of events in Python with matplotlib">
                    <span>&#35;</span> Displaying a timeline of events in Python with matplotlib
                  </a>
                </li><li class="line-clamp-2 hover:text-accent">
                  <a href="#wrapping-text-in-text-labels-in-matplotlib" aria-label="Scroll to section: Wrapping text in text labels in matplotlib">
                    <span>&#35;</span> Wrapping text in text labels in matplotlib
                  </a>
                </li><li class="line-clamp-2 hover:text-accent">
                  <a href="#a-simple-scatter-graph-for-a-timeline" aria-label="Scroll to section: A simple scatter graph for a timeline">
                    <span>&#35;</span> A simple scatter graph for a timeline
                  </a>
                </li><li class="line-clamp-2 hover:text-accent">
                  <a href="#adding-labels-to-the-timeline-graph" aria-label="Scroll to section: Adding labels to the timeline graph">
                    <span>&#35;</span> Adding labels to the timeline graph
                  </a>
                </li><li class="line-clamp-2 hover:text-accent">
                  <a href="#joining-the-labels-to-the-graph-with-lines" aria-label="Scroll to section: Joining the labels to the graph with lines">
                    <span>&#35;</span> Joining the labels to the graph with lines
                  </a>
                </li><li class="line-clamp-2 hover:text-accent">
                  <a href="#adding-images-to-the-timeline" aria-label="Scroll to section: Adding images to the timeline">
                    <span>&#35;</span> Adding images to the timeline
                  </a>
                </li><li class="line-clamp-2 hover:text-accent">
                  <a href="#conclusion" aria-label="Scroll to section: Conclusion">
                    <span>&#35;</span> Conclusion
                  </a>
                </li>
            </ul>
    </aside>
  </div><button id="to-top-btn" class="z-90 fixed bottom-8 right-4 flex h-10 w-10 translate-y-28 items-center justify-center rounded-full border-2 border-transparent bg-zinc-200 text-3xl opacity-0 transition-all duration-300 hover:border-zinc-400 data-[show=true]:translate-y-0 data-[show=true]:opacity-100 dark:bg-zinc-700 sm:right-8 sm:h-12 sm:w-12" aria-label="Back to Top" data-show="false"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="h-6 w-6">
      <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 15.75l7.5-7.5 7.5 7.5"></path>
    </svg>
  </button>
    </main>
    <footer class="mt-auto flex w-full flex-col flex-wrap items-center justify-center gap-y-2 pt-20 pb-4 text-center align-top text-gray-500 sm:flex-row sm:justify-between sm:text-xs">
  <div class="flex flex-wrap items-center gap-x-4 sm:items-center">
  <p>Find me on</p>
  <ul class="flex flex-1 items-center gap-x-4 sm:flex-initial">
    <li>
      <a class="inline-block p-2 sm:hover:text-link" href="https://github.com/gotofritz" target="_blank" rel="noopener noreferrer">
        <svg class="h-6 w-6" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5">
          </path>
          <title>Github</title>
        </svg>
        <span class="sr-only">Github</span>
      </a>
    </li>
    <!-- <li>
      <a
        class="inline-block p-2 sm:hover:text-link"
        href="https://fosstodon.org/@gotofritz"
        target="_blank"
        rel="noopener noreferrer"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-6 w-6"
          stroke-width="1.5"
          stroke="currentColor"
          fill="none"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <path
            d="M18.648 15.254c-1.816 1.763 -6.648 1.626 -6.648 1.626a18.262 18.262 0 0 1 -3.288 -.256c1.127 1.985 4.12 2.81 8.982 2.475c-1.945 2.013 -13.598 5.257 -13.668 -7.636l-.026 -1.154c0 -3.036 .023 -4.115 1.352 -5.633c1.671 -1.91 6.648 -1.666 6.648 -1.666s4.977 -.243 6.648 1.667c1.329 1.518 1.352 2.597 1.352 5.633s-.456 4.074 -1.352 4.944z"
          ></path>
          <path
            d="M12 11.204v-2.926c0 -1.258 -.895 -2.278 -2 -2.278s-2 1.02 -2 2.278v4.722m4 -4.722c0 -1.258 .895 -2.278 2 -2.278s2 1.02 2 2.278v4.722"
          ></path>

          <title>Mastodon</title>
        </svg>
        <span class="sr-only">Mastodon</span>
      </a>
    </li> -->
    <li>
      <a class="inline-block p-2 sm:hover:text-link" href="https://www.linkedin.com/in/gotofritz/" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" aria-hidden="true" focusable="false" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <rect x="4" y="4" width="16" height="16" rx="2"></rect>
          <line x1="8" y1="11" x2="8" y2="16"></line>
          <line x1="8" y1="8" x2="8" y2="8.01"></line>
          <line x1="12" y1="16" x2="12" y2="11"></line>
          <path d="M16 16v-3a2 2 0 0 0 -4 0"></path>
          <title>LinkedIn</title>
        </svg>
        <span class="sr-only">LinkedIn</span>
      </a>
    </li>
    <li>
      <a class="inline-block p-2 sm:hover:text-link" href="mailto:info@gotofritz.net">
        <svg class="h-6 w-6" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <rect x="3" y="5" width="18" height="14" rx="2"></rect>
          <polyline points="3 7 12 13 21 7"></polyline>
          <title>Email</title>
        </svg>
        <span class="sr-only">Email</span>
      </a>
    </li>
    <li>
      <a class="inline-block p-2 sm:hover:text-link" href="/feed.xml">
        <svg class="h-6 w-6" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <circle cx="5" cy="19" r="1"></circle>
          <path d="M4 4a16 16 0 0 1 16 16"></path>
          <path d="M4 11a9 9 0 0 1 9 9"></path>
          <title>RSS</title>
        </svg>
        <span class="sr-only">RSS</span>
      </a>
    </li>
  </ul>
</div>
  <nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500">
    <a href="/" class="sm:px-4 px-2 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline">Home</a>
    <a href="/about" class="sm:px-4 px-2 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline">About</a>
    <a href="/posts" class="sm:px-4 px-2 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline">Blog</a>
    <a href="/fritz-stelluto_resume.pdf" class="sm:px-4 px-2 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline">Resume</a>
  </nav>
  <div class="my-8 mr-0 sm:mr-4">
    <a href="https://creativecommons.org/licenses/by/4.0/">Licensed under a Creative Commons Attribution 4.0 license</a>
  </div>
</footer>
  </body></html>