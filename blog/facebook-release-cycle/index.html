<!DOCTYPE HTML><html><head><meta charset=utf-8><title>Facebook continuos integration cycle || gotofritz</title><meta name=author content=gotofritz><meta name=description content="There is an interesting screencast by Chuck Rossi, release manager, on how they manage the release process at Facebook. Worth seeing, but if you haven’t got the time, here’s a quick executive summary."><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><link href=/assets/favicon.ico rel="shortcut icon"><link rel=icon href=/assets/favicon.gif type=image/gif><link href=/assets/css/screen.css media="screen, projection" rel=stylesheet type=text/css><link rel=preconnect href=https://stats.g.doubleclick.net><link rel=preconnect href=https://ssl.google-analytics.com></head><body class=content-post><div class=gradient-container><main class=panel-container><div class=content><nav class=flat-nav><div itemscope itemtype=http://schema.org/Person class="vcard group-of-links"><a href=/ >home</a><form class=search action=https://google.com/search><input id=search-str name=q results=0 placeholder=search> <input type=hidden name=q value=site:gotofritz.net></form></div></nav><article><section class=intro><div class=post-meta><time datetime=2011-07-26T17:52:00+02:00 pubdate>2011-07-26</time> //<div class=tags>facebook</div></div><h1>Facebook continuos integration cycle</h1><h2>There is an interesting screencast by Chuck Rossi, release manager, on how they manage the release process at Facebook. Worth seeing, but if you haven’t got the time, here’s a quick executive summary.</h2></section><section class=post-content><h2 id=facebook-runs-weekly-release-cycles>Facebook runs weekly release cycles</h2><p>Facebook use svn internally. All developers push to the trunk; every Sunday a release branch is created from the trunk (the ‘shadow branch’, which includes the tests as well). It gets tested for a couple of days, and on Tuesday it is pushed out. Each developer is responsible for their own fixes, and if they are not available to support them the fixes is removed from the branch.</p><h2 id=facebook-uses-irc-bots-internally>Facebook uses IRC bots internally</h2><p>Everybody communicates internally by IRC; IRC bots are set up to reply to common questions (the “questions that should not be asked” as Chuck Rossi called them). For example to ask “is my rev going to be in the next release”, the developer would type <code>/msg request_bot rt [rev #]?</code> either in the IRC window, or the address bar of their browser.</p><p>IRC bots are also used to communicate availability to support one’s own fixes <code>/msg request_bot support</code> or someone else’s <code>/msg request_bot support @someoneelse</code> A fix with nobody to support it is not released.</p><h2 id=facebook-use-the-usual-testing-tools-plus-some-custom-ones>Facebook use the usual testing tools, plus some custom ones</h2><p>They use unit testing, selenium, PHP debugging, and have quite a few reporting tools of their own. They have a nifty one which isolates PHP errors and gives a timeline of how often it occurs.</p><h2 id=facebook-use-a-gatekeeper-to-push-code-out>Facebook use a gatekeeper to push code out</h2><p>The code for next 6 months is already in the Facebook codebase - but it’s not available to members of the public. There is a ‘gatekeeper’ to determine who runs varios revisions of the code - they can make it available internally, by IP range, by age group, country, and, interestingly, by % of global users. That allows them to push out a revision to 1% of the general public for a few minutes, gather some data, make the code unavailable again, analyze the data, and then try again, perhaps with a high percentage next time.</p><h2 id=facebook-use-push-karma-to-manage-risk>Facebook use push karma to manage risk</h2><p>Every developer has a karma score of 4 stars when they start, and any major issue they caused lowers that score. That allows the release managers to decide whether to run extra tests for riskier developers.</p><h2 id=facebook-use-bittorrent-to-push-code-to-the-cluster>Facebook use BitTorrent to push code to the cluster</h2><p>PHP code is compiled, using HipHop, into a 1GB binary which includes all of Facebook.com. That is then put on an internal BitTorrent tracker, and the thousand of production servers download it. The release managers can then reboot them in clusters with the changes.</p><p>*[svn]: subversion</p></section></article></div><footer><div class=content><nav class=flat-nav><div itemscope itemtype=http://schema.org/Person class="vcard group-of-links"><a href=https://github.com/gotofritz>github</a> <a href=https://twitter.com/gotofritz>twitter</a> <a href=https://www.linkedin.com/in/gotofritz>linkedin</a> <a href=/feed.xml>rss</a></div></nav></div><div class=content>All content by Fritz Stelluto. I have been a developer and technical manager in the digital media industry since the 90s. I relocated a few years ago from London to Berlin.</div><div class=content>All content under <a href=http://creativecommons.org/licenses/by-nc-sa/2.0/de/ >creative commons</a> and code under <a href=http://mit-license.org/ >MIT license</a>.</div></footer></main></div><script type=text/javascript>var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-11254155-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();</script></body></html>