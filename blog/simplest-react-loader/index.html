<!DOCTYPE HTML><html><head><meta charset=utf-8><title>The simplest React Loader || gotofritz</title><meta name=author content=gotofritz><meta name=description content="When I&amp;#x2019;m messing about with React I often need a loading component as a placeholder. Here I create a simple one with no dependencies"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><link href=/assets/favicon.ico rel="shortcut icon"><link rel=icon href=/assets/favicon.gif type=image/gif><link href=/assets/css/screen.css media="screen, projection" rel=stylesheet type=text/css></head><body class=content-post><div class=gradient-container><main class=panel-container><div class=content><nav class=flat-nav><div itemscope itemtype=http://schema.org/Person class="vcard group-of-links"><a href=/ >home</a><form class=search action=https://google.com/search><input id=search-str name=q results=0 placeholder=search> <input type=hidden name=q value=site:gotofritz.net></form></div></nav><article><section class=intro><div class=post-meta><time datetime=2018-02-18T13:44:00+01:00 pubdate>2018-02-18</time> //<div class=tags>react, frontend</div></div><h1>The simplest React Loader</h1><h2>When I&#x2019;m messing about with React I often need a loading component as a placeholder. Here I create a simple one with no dependencies</h2></section><section class=post-content><h2 id=a-pure-css-spinning-loader>A pure CSS spinning loader</h2><p>The simplest possible loader I can think of is a spinning broken circle. With CSS you can create a circle simply by setting the border-radius of a div to 50%. You also need a few other CSS rules like the border-color, width and height (make sure they are the same!)</p><pre class=language-css><code class=language-css><span class="token selector">.loading</span> <span class="token punctuation">{</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 10px solid red<span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
  <span class="token property">border-left-color</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>To break the circle, just remove one of the borders by making its colour transparent - I have removed boorder-left - and there you have it</p><p>To animate it you need a keyframes object with the state at the beginning and end of the cycle. Even better, you don&#x2019;t even need the &#x2018;from&#x2019; state, it is just the initial state as defined in the other styles. Then you refer to those keyframe with the animation rule</p><pre class=language-css><code class=language-css><span class="token selector">.loading</span> <span class="token punctuation">{</span>
  <span class="token property">animation</span><span class="token punctuation">:</span> 1s linear infinite gotofritz-spin<span class="token punctuation">;</span>
  ....
<span class="token punctuation">}</span>

<span class="token atrule"><span class="token rule">@keyframes</span> gotofritz-spin</span> <span class="token punctuation">{</span>
  <span class="token selector">to</span> <span class="token punctuation">{</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>360deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>In the code sample below I have slightly rearranged the CSS, and introduced the <code>backface-visibility: hidden</code> property to force the animation in its own rendering layer. This is a performance enhancement that makes more sense if the spinner is animating over a complex background, and it means the background won&#x2019;t need to be rerendered all the time.</p><p data-height=265 data-theme-id=dark data-slug-hash=rZMBzR data-default-tab=css,result data-user=gotofritz data-pen-title="The Simplest React Loader - step 1" class=codepen>See the Pen <a href=https://codepen.io/gotofritz/pen/rZMBzR/ >The Simplest React Loader - step 1</a> by gotofritz (<a href=https://codepen.io/gotofritz>@gotofritz</a>) on <a href=https://codepen.io>CodePen</a>.</p><script async src=https://static.codepen.io/assets/embed/ei.js></script><h2 id=replacing-the-html-with-a-functional-react-component>Replacing the HTML with a functional React component</h2><p>As a first step I will remove the HTML completely, introduce React and have it render the div that was priorly in the HTML. It will be a simple one line stateless, functional component, attached directly to the body</p><pre class=language-js><code class=language-js><span class="token keyword">function</span> <span class="token function">Loading</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div classname<span class="token operator">=</span><span class="token string">&quot;loading&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>loading<span class="token operator">&gt;</span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&apos;body&apos;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>loading<span class="token operator">&gt;</span></code></pre><p>So the HTML is gone; now I need to make the CSS disappear, as I want to have a simple one file component that doesn&#x2019;t make any assumptios about how the CSS is handled. For the first part I just turn the CSS into a JS object, and pass it to the component. I can even have some of the CSS set by props</p><pre class=language-js><code class=language-js><span class="token keyword">function</span> <span class="token function">Loading</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> size <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">}</span> <span class="token operator">=</span> props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> style <span class="token operator">=</span> <span class="token punctuation">{</span>
        display<span class="token punctuation">:</span> <span class="token string">&apos;inline-block&apos;</span><span class="token punctuation">,</span>
        width<span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>size<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        <span class="token operator">...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>loading size<span class="token operator">=</span><span class="token string">&quot;50&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&apos;body&apos;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>loading<span class="token operator">&gt;</span></code></pre><p>The only thing left to add the animation itself to the component.</p><p data-height=700 data-theme-id=dark data-slug-hash=mGrdeX data-default-tab=js,result data-user=gotofritz data-pen-title="The Simplest React Loader - step 2" class=codepen>See the Pen <a href=https://codepen.io/gotofritz/pen/mGrdeX/ >The Simplest React Loader - step 2</a> by gotofritz (<a href=https://codepen.io/gotofritz>@gotofritz</a>) on <a href=https://codepen.io>CodePen</a>.</p><h2 id=adding-keframes-to-the-inline-style-of-the-react-component>Adding keframes to the inline style of the React component</h2><p>There are many (too many..?) ways to handle CSS with React components. But they all introduce dependencies, and I don&#x2019;t want that. All of these solutions one way or another end up generating CSS on the fly and adding it to the document. I can do that as well; it&#x2019;s just one line of CSS after all. I put that in the component, checking to see if the style already exists.</p><p data-height=700 data-theme-id=dark data-slug-hash=vzGxaG data-default-tab=js,result data-user=gotofritz data-pen-title="The Simplest React Loader" class=codepen>See the Pen <a href=https://codepen.io/gotofritz/pen/vzGxaG/ >The Simplest React Loader</a> by gotofritz (<a href=https://codepen.io/gotofritz>@gotofritz</a>) on <a href=https://codepen.io>CodePen</a>.</p><p>And there you have it - the simplest of loaders, fairly customisable and all in one file, without dependencies. It&#x2019;s not something I would use in production (although it wouldn&#x2019;t be the end of the world if I did) but it&#x2019;s great for quick prototyping.</p></section></article></div><footer><div class=content><nav class=flat-nav><div itemscope itemtype=http://schema.org/Person class="vcard group-of-links"><a href=https://github.com/gotofritz>github</a> <a href=https://twitter.com/gotofritz>twitter</a> <a href=https://www.linkedin.com/in/gotofritz>linkedin</a> <a href=/feed.xml>rss</a></div></nav></div><div class=content>All content by Fritz Stelluto. I have been a developer and technical manager in the digital media industry since the 90s. I relocated a few years ago from London to Berlin.</div><div class=content>All content under <a href=http://creativecommons.org/licenses/by-nc-sa/2.0/de/ >creative commons</a> and code under <a href=http://mit-license.org/ >MIT license</a>.</div></footer></main></div><script type=text/javascript>var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-11254155-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();</script></body></html>