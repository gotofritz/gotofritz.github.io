<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <title>The simplest React Loader || Fritz Stelluto</title>
  <meta name="author" content="gotofritz">
  <meta name="description" content="When I&amp;#39;m messing about with React I often need a loading component as a placeholder. Here I create a simple one with no dependencies">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link href="/assets/favicon.ico" rel="shortcut icon">
  <link rel="icon" href="/assets/favicon.gif" type="image/gif" />
  <link href="/assets/css/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
</head>

<body ontouchstart="">
  <header id="header" class="inner">
    <nav id="main-nav">
      <div>
        <a href="/">home</a>
        <a href="/blog/">blog</a>
      </div>
    </nav>

    <nav id="sub-nav" class="alignright">
      <form class="search" action="http://google.com/search" method="get">
        <input class="alignright" type="text" name="q" results="0">
        <input type="hidden" name="q" value="site:gotofritz.net">
      </form>
    </nav>
  </header>


<div id="content" class="inner">
  <article class="post">
    <h1 class="title">The simplest React Loader</h1>
    <div>
      <div class="meta">
        <div class="date">
          <time datetime="2018-02-18T13:44:00+01:00" pubdate>2018-02-18</time>
        </div>
        <div class="tags">
          react,
          frontend
        </div>
      </div>
      <div class="entry-content">
    
<p>When I&#39;m messing about with React I often need a loading component as a placeholder. Here I create a simple one with no dependencies
<!--more--></p>
<h2 id="a-pure-css-spinning-loader">A pure CSS spinning loader</h2>
<p>The simplest possible loader I can think of is a spinning broken circle. With CSS you can create a circle simply by setting the border-radius of a div to 50%. You also need a few other CSS rules like the border-color, width and height (make sure they are the same!)</p>
<pre><code class="language-css">.loading {
  border: 10px solid red;
  border-radius: 50%;
  border-left-color: transparent;
  display: inline-block;
  height: 50px;
  width: 50px;
}
</code></pre>

<p>To break the circle, just remove one of the borders by making its colour transparent - I have removed boorder-left - and there you have it</p>
<p>To animate it you need a keyframes object with the state at the beginning and end of the cycle. Even better, you don&#39;t even need the &#39;from&#39; state, it is just the initial state as defined in the other styles. Then you refer to those keyframe with the animation rule</p>
<pre><code class="language-css">.loading {
  animation: 1s linear infinite gotofritz-spin;
  ....
}

@keyframes gotofritz-spin {
  to {
    transform: rotate(360deg);
  }
}
</code></pre>

<p>In the code sample below I have slightly rearranged the CSS, and introduced the <code>backface-visibility: hidden</code> property to force the animation in its own rendering layer. This is a performance enhancement that makes more sense if the spinner is animating over a complex background, and it means the background won&#39;t need to be rerendered all the time.</p>
<p data-height="265" data-theme-id="light" data-slug-hash="rZMBzR" data-default-tab="css,result" data-user="gotofritz" data-pen-title="The Simplest React Loader - step 1" class="codepen">See the Pen <a href="https://codepen.io/gotofritz/pen/rZMBzR/">The Simplest React Loader - step 1</a> by gotofritz (<a href="https://codepen.io/gotofritz">@gotofritz</a>) on <a href="https://codepen.io">CodePen</a>.</p>
<script async src="https://static.codepen.io/assets/embed/ei.js"></script>

## Replacing the HTML with a functional React component

As a first step I will remove the HTML completely, introduce React and have it render the div that was priorly in the HTML. It will be a simple one line stateless, functional component, attached directly to the body

<pre><code class="language-jsx">function Loading() {
  return <div className="loading"></div>;
}

ReactDOM.render(
  <Loading>,
  document.getElementsByTagName(&#39;body&#39;)[0]
);
</code></pre>


So the HTML is gone; now I need to make the CSS disappear, as I want to have a simple one file component that doesn&#39;t make any assumptios about how the CSS is handled. For the first part I just turn the CSS into a JS object, and pass it to the component. I can even have some of the CSS set by props

    function Loading({ size = 50} = props) {
        const style = {
            display: &#39;inline-block&#39;,
            width: <code>${size}px</code>,
            ...
        }
    }
    ReactDOM.render(
        <Loading size="50" />,
        document.getElementsByTagName(&#39;body&#39;)[0]
    );

The only thing left to add the animation itself to the component.

<p data-height="265" data-theme-id="light" data-slug-hash="mGrdeX" data-default-tab="js,result" data-user="gotofritz" data-pen-title="The Simplest React Loader - step 2" class="codepen">See the Pen <a href="https://codepen.io/gotofritz/pen/mGrdeX/">The Simplest React Loader - step 2</a> by gotofritz (<a href="https://codepen.io/gotofritz">@gotofritz</a>) on <a href="https://codepen.io">CodePen</a>.</p>

<h2 id="adding-keframes-to-the-inline-style-of-the-react-component">Adding keframes to the inline style of the React component</h2>
<p>There are many (too many..?) ways to handle CSS with React components. But they all introduce dependencies, and I don&#39;t want that. All of these solutions one way or another end up generating CSS on the fly and adding it to the document. I can do that as well; it&#39;s just one line of CSS after all. I put that in the component, checking to see if the style already exists.</p>
<p data-height="265" data-theme-id="light" data-slug-hash="vzGxaG" data-default-tab="js,result" data-user="gotofritz" data-pen-title="The Simplest React Loader" class="codepen">See the Pen <a href="https://codepen.io/gotofritz/pen/vzGxaG/">The Simplest React Loader</a> by gotofritz (<a href="https://codepen.io/gotofritz">@gotofritz</a>) on <a href="https://codepen.io">CodePen</a>.</p>

<p>And there you have it - the simplest of loaders, fairly customisable and all in one file, without dependencies. It&#39;s not something I would use in production (although it wouldn&#39;t be the end of the world if I did) but it&#39;s great for quick prototyping.</p>

      </div>
    </div>
  </article>


<!-- <section id="comment">
    <h1 class="title">Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>

  </div>
  -->
  <footer id="footer" class="inner">Copyright &copy; 2016

    Fritz Stelluto

</footer>
<!--
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript">
      var disqus_shortname = 'goto-fritz';


        // var disqus_developer = 1;
        var disqus_identifier = 'http://gotofritz.net/blog/geekery/backing-up-hard-disk-os-x/';
        var disqus_url = 'http://gotofritz.net/blog/geekery/backing-up-hard-disk-os-x/';
        var disqus_script = 'embed.js';

    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>
-->


  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-11254155-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>

</body>
</html>