import{S as zt,i as Bt,s as Gt,e as n,t as l,k as h,c as r,a as i,d as e,h as p,m as d,b as c,g as o,I as s,E as xt}from"./index-e78f36eb.js";function Jt(Ct){let u,m,H,et,W,f,at,S,st,ot,A,nt,rt,F,v,y,O,it,Y,g,lt,C,pt,ct,q,k,ht,N,dt,ut,j,x,Nt=`<code class="language-xml">DocumentRoot "/Library/WebServer/Documents"
&lt;Directory "/Library/WebServer/Documents">
    Options +Indexes +FollowSymLinks
    # etc
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Directory</span><span class="token punctuation">></span></span></code>`,z,T,ft,B,E,Mt=`<code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>VirtualHost</span> <span class="token attr-name"><span class="token namespace">*:</span>81</span><span class="token punctuation">></span></span>
    DocumentRoot "/pth/to/somewhere/completely/different"
    ServerName my-virtual-host.dev
    ErrorLog "/private/var/log/apache2/my-virtual-host.dev-error_log"
    CustomLog "/private/var/log/apache2/my-virtual-host.dev-access_log" common
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>VirtualHost</span><span class="token punctuation">></span></span></code>`,G,L,mt,J,D,Vt=`<code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>VirtualHost</span> <span class="token attr-name"><span class="token namespace">*:</span>80</span><span class="token punctuation">></span></span>
    DocumentRoot "/pth/to/somewhere/completely/different"
    ServerName my-virtual-host.dev
    ErrorLog "/private/var/log/apache2/my-virtual-host.dev-error_log"
    CustomLog "/private/var/log/apache2/my-virtual-host.dev-access_log" common
    &lt;Directory "/pth/to/somewhere/completely/different">
        Options +Indexes
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Directory</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>VirtualHost</span><span class="token punctuation">></span></span></code>`,K,R,vt,Q,I,Wt=`<code class="language-xml">&lt;Directory "/parent/of/somewhere/completely/different">
    Options +Indexes
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Directory</span><span class="token punctuation">></span></span></code>`,U,b,_,M,yt,X,w,gt,V,kt,bt;return{c(){u=n("h2"),m=n("a"),H=n("span"),et=l("Yosemite updates Apache from 2.2 to 2.4"),W=h(),f=n("p"),at=l("I t copies the old httpd.conf to "),S=n("code"),st=l("/etc/apache2/httpd.conf~previous"),ot=l(" and replaces it with a vannilla one. Annoying, but not too painful to replace, and it doesn\u2019t touch the vhosts. "),A=n("a"),nt=l("The list of 2.4 changes"),rt=l(" doesn\u2019t include anything I actually use. Sadly that doesn\u2019t mean nothing important has changed - rather, they didn\u2019t bother to list things that matter to me."),F=h(),v=n("h2"),y=n("a"),O=n("span"),it=l("Apache \u201Cdirectory listing forbidden\u201D"),Y=h(),g=n("p"),lt=l("I used to rely on the automatic directory listings generated by mod_autoidex, but they has stopped working. The logs give the message "),C=n("code"),pt=l("No matching DirectoryIndex (index.html) found, and server-generated directory index forbidden by Options directive"),ct=l(". \u201CImpossible!\u201D I cry, the settings are right, and they always worked."),q=h(),k=n("p"),ht=l("This is the DocumentRoot fragment of httpd.conf. "),N=n("code"),dt=l("+Indexes"),ut=l(" is the bit which is supposed to turn on auto-indexing. I use /Library/\u2026 for not so important documents I need to put under a webserver for whatever reason."),j=h(),x=n("pre"),z=h(),T=n("p"),ft=l("And this is one of the virtual hosts. For serious dev work, I put my vhosts somewhere other than /Library/\u2026"),B=h(),E=n("pre"),G=h(),L=n("p"),mt=l("What has changed is that now the options for DocumentRoot don\u2019t automatically carry over to folders which are not subdirectories of DocumentRoot. This can be easily fixed by changing virtual hosts to"),J=h(),D=n("pre"),K=h(),R=n("p"),vt=l("That proves what the problem is, but it sucks having to do that for every virtual host. The solution is to add the directive for the common parent folder of all my virtual hosts in httpd.conf"),Q=h(),I=n("pre"),U=h(),b=n("h2"),_=n("a"),M=n("span"),yt=l("Restart apache and all is well"),X=h(),w=n("p"),gt=l("A fter a "),V=n("code"),kt=l("sudo apachectl restart"),bt=l(" everything works fine."),this.h()},l(t){u=r(t,"H2",{id:!0});var a=i(u);m=r(a,"A",{"aria-hidden":!0,tabindex:!0,href:!0});var Et=i(m);H=r(Et,"SPAN",{class:!0}),i(H).forEach(e),Et.forEach(e),et=p(a,"Yosemite updates Apache from 2.2 to 2.4"),a.forEach(e),W=d(t),f=r(t,"P",{});var P=i(f);at=p(P,"I t copies the old httpd.conf to "),S=r(P,"CODE",{});var Dt=i(S);st=p(Dt,"/etc/apache2/httpd.conf~previous"),Dt.forEach(e),ot=p(P," and replaces it with a vannilla one. Annoying, but not too painful to replace, and it doesn\u2019t touch the vhosts. "),A=r(P,"A",{href:!0});var It=i(A);nt=p(It,"The list of 2.4 changes"),It.forEach(e),rt=p(P," doesn\u2019t include anything I actually use. Sadly that doesn\u2019t mean nothing important has changed - rather, they didn\u2019t bother to list things that matter to me."),P.forEach(e),F=d(t),v=r(t,"H2",{id:!0});var _t=i(v);y=r(_t,"A",{"aria-hidden":!0,tabindex:!0,href:!0});var At=i(y);O=r(At,"SPAN",{class:!0}),i(O).forEach(e),At.forEach(e),it=p(_t,"Apache \u201Cdirectory listing forbidden\u201D"),_t.forEach(e),Y=d(t),g=r(t,"P",{});var Z=i(g);lt=p(Z,"I used to rely on the automatic directory listings generated by mod_autoidex, but they has stopped working. The logs give the message "),C=r(Z,"CODE",{});var Tt=i(C);pt=p(Tt,"No matching DirectoryIndex (index.html) found, and server-generated directory index forbidden by Options directive"),Tt.forEach(e),ct=p(Z,". \u201CImpossible!\u201D I cry, the settings are right, and they always worked."),Z.forEach(e),q=d(t),k=r(t,"P",{});var $=i(k);ht=p($,"This is the DocumentRoot fragment of httpd.conf. "),N=r($,"CODE",{});var Lt=i(N);dt=p(Lt,"+Indexes"),Lt.forEach(e),ut=p($," is the bit which is supposed to turn on auto-indexing. I use /Library/\u2026 for not so important documents I need to put under a webserver for whatever reason."),$.forEach(e),j=d(t),x=r(t,"PRE",{class:!0});var Ft=i(x);Ft.forEach(e),z=d(t),T=r(t,"P",{});var Rt=i(T);ft=p(Rt,"And this is one of the virtual hosts. For serious dev work, I put my vhosts somewhere other than /Library/\u2026"),Rt.forEach(e),B=d(t),E=r(t,"PRE",{class:!0});var Yt=i(E);Yt.forEach(e),G=d(t),L=r(t,"P",{});var Pt=i(L);mt=p(Pt,"What has changed is that now the options for DocumentRoot don\u2019t automatically carry over to folders which are not subdirectories of DocumentRoot. This can be easily fixed by changing virtual hosts to"),Pt.forEach(e),J=d(t),D=r(t,"PRE",{class:!0});var qt=i(D);qt.forEach(e),K=d(t),R=r(t,"P",{});var Ht=i(R);vt=p(Ht,"That proves what the problem is, but it sucks having to do that for every virtual host. The solution is to add the directive for the common parent folder of all my virtual hosts in httpd.conf"),Ht.forEach(e),Q=d(t),I=r(t,"PRE",{class:!0});var jt=i(I);jt.forEach(e),U=d(t),b=r(t,"H2",{id:!0});var wt=i(b);_=r(wt,"A",{"aria-hidden":!0,tabindex:!0,href:!0});var St=i(_);M=r(St,"SPAN",{class:!0}),i(M).forEach(e),St.forEach(e),yt=p(wt,"Restart apache and all is well"),wt.forEach(e),X=d(t),w=r(t,"P",{});var tt=i(w);gt=p(tt,"A fter a "),V=r(tt,"CODE",{});var Ot=i(V);kt=p(Ot,"sudo apachectl restart"),Ot.forEach(e),bt=p(tt," everything works fine."),tt.forEach(e),this.h()},h(){c(H,"class","icon icon-link"),c(m,"aria-hidden","true"),c(m,"tabindex","-1"),c(m,"href","#yosemite-updates-apache-from-22-to-24"),c(u,"id","yosemite-updates-apache-from-22-to-24"),c(A,"href","https://httpd.apache.org/docs/trunk/new_features_2_4.html"),c(O,"class","icon icon-link"),c(y,"aria-hidden","true"),c(y,"tabindex","-1"),c(y,"href","#apache-directory-listing-forbidden"),c(v,"id","apache-directory-listing-forbidden"),c(x,"class","language-xml"),c(E,"class","language-xml"),c(D,"class","language-xml"),c(I,"class","language-xml"),c(M,"class","icon icon-link"),c(_,"aria-hidden","true"),c(_,"tabindex","-1"),c(_,"href","#restart-apache-and-all-is-well"),c(b,"id","restart-apache-and-all-is-well")},m(t,a){o(t,u,a),s(u,m),s(m,H),s(u,et),o(t,W,a),o(t,f,a),s(f,at),s(f,S),s(S,st),s(f,ot),s(f,A),s(A,nt),s(f,rt),o(t,F,a),o(t,v,a),s(v,y),s(y,O),s(v,it),o(t,Y,a),o(t,g,a),s(g,lt),s(g,C),s(C,pt),s(g,ct),o(t,q,a),o(t,k,a),s(k,ht),s(k,N),s(N,dt),s(k,ut),o(t,j,a),o(t,x,a),x.innerHTML=Nt,o(t,z,a),o(t,T,a),s(T,ft),o(t,B,a),o(t,E,a),E.innerHTML=Mt,o(t,G,a),o(t,L,a),s(L,mt),o(t,J,a),o(t,D,a),D.innerHTML=Vt,o(t,K,a),o(t,R,a),s(R,vt),o(t,Q,a),o(t,I,a),I.innerHTML=Wt,o(t,U,a),o(t,b,a),s(b,_),s(_,M),s(b,yt),o(t,X,a),o(t,w,a),s(w,gt),s(w,V),s(V,kt),s(w,bt)},p:xt,i:xt,o:xt,d(t){t&&e(u),t&&e(W),t&&e(f),t&&e(F),t&&e(v),t&&e(Y),t&&e(g),t&&e(q),t&&e(k),t&&e(j),t&&e(x),t&&e(z),t&&e(T),t&&e(B),t&&e(E),t&&e(G),t&&e(L),t&&e(J),t&&e(D),t&&e(K),t&&e(R),t&&e(Q),t&&e(I),t&&e(U),t&&e(b),t&&e(X),t&&e(w)}}}const Qt={title:"Directory listings in Apache 2.4",date:"2015-03-07 23:14",draft:!1,excerpt:"Yosemite updates Apache to 2.4. A couple of things stopped working from my previous installation, including autogenerated directory listings. Here's how I got them back.",tags:["apache","os x"]};class Ut extends zt{constructor(u){super(),Bt(this,u,null,Jt,Gt,{})}}export{Ut as default,Qt as metadata};
